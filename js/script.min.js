var thisdomain="";jQuery.fn.extend({check:function(){return this.each(function(){this.checked=true;});},uncheck:function(){return this.each(function(){this.checked=false;});}});$.fn.toggleCheck=function(){if(this.tagName==='INPUT'){$(this).prop('checked',!($(this).is(':checked')));}}
function checkorder(){$(".error").remove();fullname=$("input[name='fullname']");phone=$("input[name='phone']");city=$("input[name='city']");qh=$("input[name='qh']");px=$("input[name='px']");address=$("textarea[name='address']");if(fullname.val()==''){fullname.focus().after('<span class="error">Bạn chưa nhập họ và tên!</span>');return false;}if(phone.val()==''){phone.focus().after('<span class="error">Bạn chưa nhập điện thoại!</span>');return false;}if(city.val()==''){city.focus().after('<span class="error">Bạn chưa chọn tỉnh thành!</span>');return false;}if(address.val()==''){address.focus().after('<span class="error">Bạn chưa nhập địa chỉ!</span>')
return false;}}function loadding(){}function loadconplex(){}function msgshow(msg){$("body").appendTo("<div class=\"msgshow alert alert-success\">"+msg+"</div>");}$.fn.toggleCheck=function(){if(this.tagName==='INPUT'){$(this).prop('checked',!($(this).is(':checked')));}}
$(function(){$(window).scroll(function(){if($(this).scrollTop()>100){$('.scrollToTop, .bar-bottom').fadeIn();if($(this).scrollTop()>500)$('.scrollTobottom').fadeOut();$(".navbar").addClass("navbar-fixed-top");}else{$('.scrollToTop').fadeOut();$(".navbar").removeClass("navbar-fixed-top");$('.scrollTobottom').fadeIn();}});$('.scrollToTop').click(function(){$('html, body').animate({scrollTop:0},800);return false;});$('.scrollTobottom').click(function(){$('html, body').animate({scrollTop:$(document).height()},800);return false;});if($(document).width()>=1024){$(".dropdown").hover(function(){$('.dropdown-menu',this).stop().fadeIn("fast");},function(){$('.dropdown-menu',this).stop().fadeOut("fast");});}$(".pricetoogle").click(function(){$("body").addClass("loading");$.post(thisdomain+'/index.php?ajax=toggle.price').done(function(){window.location.reload();})})
$("#sim").popover({html:true,trigger:'focus'});$(".hotkey").click(function(){val=$(this).text();$("#sim").val(val);return false;})
$("input[name='simtype']").click(function(){$("body").addClass("loading");$.post(thisdomain+'/index.php?ajax=toggle.simtype',{'simtype':$(this).val()}).done(function(){window.location.reload();})})
$('.togglecheck').click(function(){$('input[name="check\[\]"]').each(function(){this.checked=!this.checked});})
$(".checktoggle").click(function(){$("input[type='checkbox']").check();})
$(document).on('click','.delcart',function(){fm=$(this);var sim=$(this).data('sim');$.ajax({url:thisdomain+'/index.php?ajax=ordered.delmycart&id='+sim,cache:false,success:function(data){fm.parents('tr').hide('show');$("#total").html(data);$("#cart").load(thisdomain+'/index.php?ajax=ordered.mycartcount');if(data==0)window.location='index.php';}})})
$(".addcart").click(function(){var sim=$(this).data('sim');var gia=$(this).data('gia');$("#myModal").modal('show');$.ajax({url:thisdomain+'/index.php?ajax=ordered.mycart&add='+sim+'&gia='+gia,cache:false,success:function(data){$("#myModal").find('.modal-content').html(data)
$("#cart").load(thisdomain+'/index.php?ajax=ordered.mycartcount');}})})
$("#order").load(thisdomain+'/index.php?ajax=neworder',2000).delay(3000).fadeIn('show');$(".ajax").click(function(){$url=$(this).attr('href')
loadding();$.ajax({type:"GET",cache:false,url:$url,success:function(html){loadconplex()
$('#myModal .modal-content').html(html);}})
$('#myModal').modal('show');return false;})
$(".modal-content").on('submit','.ajax-form',function(e){var $action=$(this).attr('action');var $form=$(this);$(".ajax-form").find("input").removeClass('has-error has-feedback')
$(".ajax-form").find("button[type='submit']").attr('disabled',true)
$("span.error").remove();$(".alert-success").remove();loadding()
$.ajax({type:"POST",url:$action,data:$form.serialize(),dataType:"json",error:function(request,error){console.log(arguments);alert(" Can't do because: "+error);},success:function(json){$(".ajax-form").find("button[type='submit']").attr('disabled',false)
loadconplex()
if(json['ok']){$(".ajax-form").before("<div class=\"alert alert-success\">"+json['ok']+"</div>");return false;}$.each(json,function(key,val){if(json[key]){$input=$(".ajax-form input[name='"+key+"'], .ajax-form textarea[name='"+key+"'],  .ajax-form select[name='"+key+"']");$input.parent().addClass('has-error has-feedback');$input.after("<span class='error'>"+json[key]+"</span>")}})}})
return false;})
$(".ajax-form").submit(function(e){var $action=$(this).attr('action');var $form=$(this);$(".ajax-form").find("input").removeClass('has-error has-feedback')
$(".ajax-form").find("button[type='submit']").attr('disabled',true)
$("span.error").remove();$(".alert-success").remove();loadding()
$.ajax({type:"POST",url:$action,data:$form.serialize(),dataType:"json",error:function(request,error){console.log(arguments);alert(" Can't do because: "+error);},success:function(json){$(".ajax-form").find("button[type='submit']").attr('disabled',false)
loadconplex()
if(json['ok']){$(".ajax-form").before("<div class=\"alert alert-success\">"+json['ok']+"</div>");return true;}$.each(json,function(key,val){if(json[key]){$input=$(".ajax-form input[name='"+key+"'],  .ajax-form textarea[name='"+key+"'], .ajax-form select[name='"+key+"']");$input.parent().addClass('has-error has-feedback');$input.after("<span class='error'>"+json[key]+"</span>")}})}})
return false;})
$(".lock").click(function(){id=$(this).data('id');$(this).toggleClass("btn-info btn-danger");fm=$(this);$.post('index.php?ajax=users.lock',{'id':id}).done(function(data){fm.text(data);})})
$(".unactive").click(function(){id=$(this).data('id');$(this).toggleClass("btn-info btn-danger");fm=$(this);$.post('index.php?ajax=users.active',{'id':id}).done(function(data){fm.text(data);})})})
function number_format(fr){var temp=fr;for(i=0;i<temp.length;i++){for(k=i;k<temp.length;k++){if(temp.charAt(k)==','){temp=temp.replace(',','');}}}var j=0;var s="";var s1="";var s2="";for(i=temp.length-1;i>=0;i--){j=j+1;if(j==3){j=0;s1=temp.substring(0,i);s2=temp.substring(i,i+3);s=","+s2+s;}}if(s1.length>0){s=s1+s;return s;}else if(s.length>0&&s2.length>0){return s.substring(1,s.length);}}function executeComma2(fr){temp=fr.value;for(i=0;i<temp.length;i++){for(k=i;k<temp.length;k++){if(temp.charAt(k)==','){temp=temp.replace(',','');}}}var j=0;var s="";var s1="";var s2="";for(i=temp.length-1;i>=0;i--){j=j+1;if(j==3){j=0;s1=temp.substring(0,i);s2=temp.substring(i,i+3);s=","+s2+s;}}if(s1.length>0){s=s1+s;fr.value=s;}else if(s.length>0&&s2.length>0){fr.value=s.substring(1,s.length);}}function executeComma(event,fr){if((event.keyCode>=96&&event.keyCode<=105)){executeComma2(fr);}else if(event.keyCode>=48&&event.keyCode<=57){executeComma2(fr);}else if(event.keyCode==8||event.keyCode==46||event.keyCode==8||event.keyCode==9){executeComma2(fr);}else{}}function xoadau(alias){var str=alias;str=str.toLowerCase();str=str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a");str=str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e");str=str.replace(/ì|í|ị|ỉ|ĩ/g,"i");str=str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o");str=str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u");str=str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y");str=str.replace(/đ/g,"d");str=str.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'| |\"|\&|\#|\[|\]|~|$|_/g,"-");str=str.replace(/-+-/g,"-");str=str.replace(/^\-+|\-+$/g,"");return str;}